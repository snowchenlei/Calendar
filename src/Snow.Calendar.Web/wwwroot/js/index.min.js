function loadContent(){$.get("/Home/GetContent",{year:year,month:month},function(n){document.getElementById("headerHtml").innerHTML=n.header;document.getElementById("bodyHtml").innerHTML=n.body;year===thisYear&&month===thisMonth&&document.getElementById("worlDay").innerText===""&&$("#today_button").click()})}function loadDay(){$.get("/Home/GetDay",{year:year,month:month,day:day},function(n){for(var i=[],r=n.holiday,t=0,u=r.length;t<u;t++)i.push('<li><span style="vertical-align: middle;">'+r[t]+"<\/span><\/li>");document.getElementById("day").innerText=n.dayText;document.getElementById("china_Dt").innerHTML=n.lunarDateText;document.getElementById("worlDay").innerText=n.worlDay;document.getElementById("numberDay").innerText=n.numberDay;document.getElementById("chinaDay").innerText=n.chinaDay;document.getElementById("chinaDay2").innerText=n.lunarDateSexagenary;document.getElementById("holiday").innerHTML=i.join(" ");document.getElementById("animal").innerText=n.animal;document.getElementById("solarConstellation").innerText=n.solarConstellation;document.getElementById("lunarConstellation").innerText=n.lunarConstellation;document.getElementById("yearNaYinFiveElements").innerText=n.yearNaYinFiveElements;document.getElementById("monthNaYinFiveElements").innerText=n.monthNaYinFiveElements;document.getElementById("dayNaYinFiveElements").innerText=n.dayNaYinFiveElements;document.getElementById("solarPalace").innerText=n.solarPalace;document.getElementById("solarPlanet").innerText=n.solarPlanet;document.getElementById("solarTermDays").innerText=n.solarTermDays;document.getElementById("tCount").innerText=n.subtractDays})}function changeDate(){isChange=!1;$("#yearSel").selectpicker("val",year);$("#monthSel").selectpicker("val",month)}function initEvent(){$("#subMonth").click(function(){month===1?(year-=1,month=12,changeDate()):(month-=1,$("#monthSel").selectpicker("val",month))});$("#addMonth").click(function(){month===12?(year+=1,month=1,changeDate()):(month+=1,$("#monthSel").selectpicker("val",month))});$(document).on("click",".block",function(){$e=$(this);$e.find(".number").length>0&&(day=parseInt($e.find(".number")[0].innerText));clickBlock($e)});$("#today_button").click(function(){thisYear!==year&&$("#yearSel").selectpicker("val",thisYear);thisMonth!==month&&$("#monthSel").selectpicker("val",thisMonth);toToday();clickBlock($($(".today")[0]))});$("#yearSel").change(function(){year=parseInt($(this).val());isChange?loadContent():isChange=!0});$("#monthSel").change(function(){month=parseInt($("#monthSel").val());loadContent()})}function initComponent(){$("#yearSel").selectpicker({width:100,liveSearch:!0});$("#monthSel").selectpicker({width:100});$("#holidaySel").selectpicker({width:100})}function toToday(){$("#today_button").css("display","none");year=thisYear;month=thisMonth;day=thisDate}function leaveToday(){$("#today_button").css("display","")}function clickBlock(n){n.is($lastBlock)||($($lastBlock).removeClass("block_click"),n.addClass("block_click"),$lastBlock=n,thisYear===year&&thisMonth===month&&thisDate===day?toToday():leaveToday(""),loadDay())}var date=new Date,thisYear=date.getFullYear(),thisMonth=date.getMonth()+1,thisDate=date.getDate(),year=parseInt($("#yearSel").val()),month=parseInt($("#monthSel").val()),day=thisDate,isChange=!0,$lastBlock;$(function(){loadContent();initEvent();initComponent()});